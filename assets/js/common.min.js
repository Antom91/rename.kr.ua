$(function(){function e(){var e=$(window).scrollTop(),t=$(".streets-table").offset().top;e+180>t?($("header").addClass("fixed animated fadeInDown"),$(".invisible-height").addClass("active")):($(".invisible-height").removeClass("active"),$("header").removeClass("fixed animated fadeInDown"));var a={};$(".left-hand").each(function(e,t){$(this).offset().top<$(window).scrollTop()+185&&(a[e]=$(this))});var n=a[Object.keys(a)[Object.keys(a).length-1]];n&&$(".current-letter").text()!=n.text()&&$(".current-letter").text(n.text())}e(),$(".main-menu li").hover(function(){$(".main-menu li").removeClass("active"),$(this).addClass("active")},function(){$(".main-menu li").removeClass("active"),$(".main-menu li[data-active=1]").addClass("active")}),$(document).on("click",".alphabet li a",function(e){e.preventDefault();var t=$(document).find('.now .left-hand[data-letter="'+$(this).text()+'"]'),a=t.offset().top;$("header").hasClass("fixed")&&(a-=183),t&&$("html, body").animate({scrollTop:a},2e3)});var t=!1;$("#responce").length&&(t=JSON.parse($("#responce").html())),$(window).scroll(function(t){e()}),t&&$(document).on("keyup",'input[name="search"]',function(e){e.preventDefault();var a=$(this).val(),n={};a?($.each(t,function(e,t){$.each(t,function(t,s){if(s.old_name&&s.new_name){var i=s.old_name.toLowerCase().indexOf(a.toLowerCase())>=0,o=s.new_name.toLowerCase().indexOf(a.toLowerCase())>=0;(i||o)&&($.isEmptyObject(n[e])&&(n[e]=[]),n[e].push(s))}})}),n&&(html="",$.each(n,function(e,t){html+='<div class="table-row"><div class="left-hand" data-letter="'+e+'">'+e+'</div><div class="rigth-hand">',t&&$.each(t,function(e,t){var n=t.new_name,s=t.old_name,i=n.toLowerCase().indexOf(a.toLowerCase()),o=s.toLowerCase().indexOf(a.toLowerCase());i>=0&&(n=n.replace(new RegExp(n.substr(i,a.length),"i"),"<b>"+n.substr(i,a.length)+"</b>")),o>=0&&(s=s.replace(new RegExp(s.substr(o,a.length),"i"),"<b>"+s.substr(o,a.length)+"</b>")),html+='<div class="row"><div class="row-data"><a href="/street/view/id/'+t.id+'">'+s+'</a></div><div class="row-data">'+n+'</div><div class="row-data">'+(t.project?"<span style='color: red'>Розглядаеться</span>":t.resolve_date)+"</div>";var l="";t.eponim&&$.each(["","Особа","Об’єкт","Історична назва","Суб’єкт"],function(e,a){t.eponim_type==e&&(l=t.eponim&&"історична назва"!=t.eponim?'<a href="'+t.eponim+'" target="__blank">'+a+"</a>":a)}),html+='<div class="row-data">'+l+"</div>",html+="</div>"}),html+="</div></div>"}),html&&($(".current_table").removeClass("now").hide(),$(".search_table").addClass("now").show().html(html)))):($(".current_table").addClass("now").show(),$(".search_table").removeClass("now").hide())})});